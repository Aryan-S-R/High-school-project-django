{% extends 'base.html' %}
{% load static %}
<!-- {% include 'update.html' %} -->
{% block product_nav %} active {% endblock %}
{% block main_content %}
&nbsp;
<h1 style="color: blue;">
    XYZ Higher Secondary School!!
</h1>
<hr>
<h2><span><b>Student Finance Management</b></span></h2><br>
<input type="hidden" id="BookData" data-val="{{ all_lib }}">
<div class="continer">
    <div class="row">
        <div id="formContainer">
            <form action="." method="post">
                {% csrf_token %}
                <input type="hidden" class="form-control" name="lib_id" id="lib_id" value="0">
                <label for="name">Student Name</label>
                <input type="text" placeholder="Enter Student Name" id="name" name="name"><br><br>
                <label for="name">Class and Section</label>
                <input type="text" placeholder="Enter Student Class and Section" id="section" name="section"><br><br>
                <label for="fathername">Fathername</label>
                <input type="text" placeholder="Enter Student's Father Name" id="fathername" name="fathername"><br><br>
                <label for="number">Phone Number</label>
                <input type="number" placeholder="Enter Phone Number" id="number" name="number"><br><br>
                <label for="amount">Amount Paid</label>
                <input type="number" placeholder="Enter the amount" id="amount" name="amount"><br><br>
                <button type="submit">Add</button>
            </form>
        </div>
    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col-md-12">
            <div class="card">
                <div class="card-body">
                    <table class="table table-striped" id="libTable">
                        <thead>
                            <tr>
                                <th>Student Name</th>
                                <th>Section</th>
                                <th>Father Name</th>
                                <th>Phone Number</th>
                                <th>Fees Amount</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for l in lib %}
                            <tr>
                                <!-- <td>{{forloop.counter}}</td> -->
                                <td>{{l.name}}</td>
                                <td>{{l.section}}</td>
                                <td>{{l.fathername}}</td>
                                <td>{{l.number}}</td>
                                <td>{{l.amount}}</td>
                                <td>
                                <td>
                                    <a href="javascript:void(0)" data-val="{{l.id}}"
                                        class="btn btn-danger btnEdit">Edit</a>
                                </td>
                                </td>
                                {% endfor %}
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>



{% endblock %}

{% block extra_js %}
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
    integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
    integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>
<script>
    $(document).ready(function () {
        var BookData = $("#BookData").data("val");
        console.log("Bppk Data = ", BookData);


        $("#libTable").on("click", ".btnEdit", function () {
            console.log("This Data = ", $(this).data('val'));

            var thisLibData = BookData.find(obj => obj.id == parseInt($(this).data('val')));

            console.log(thisLibData);

            $("#lib_id").val(thisLibData.id);
            $("#name").val(thisLibData.name);
            $("#section").val(thisLibData.section);
            $("#fathername").val(thisLibData.fathername);
            $("#number").val(thisLibData.number);
            $("#amount").val(thisLibData.amount);

        })

    })

</script>
{% endblock %}

{% block extra_css %}
<style>
    h1,
    h2 {
        text-align: center;
    }

    form {
        text-align: center;
        justify-content: center;
    }

    input {
        width: 20%;
    }

    button {
        width: 10%;
    }
</style>

{% endblock %}